<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <table class="highlight">    
        <tr>
            <th>Date</th>
            <th>Hazard</th>
            <th></th>
        </tr> 
        {% for sheet in job.job_safety_sheet.all %}
            <tr>
              <td>{{sheet.created_at}}</td>
              <td>
                {% for hazard in sheet.sheet_hazard.all %}
                {{hazard.hazard}}<br>
                {% empty %}
                No Hazard
                {% endfor %}
              </td>
              <td>
                <a class="waves-effect waves-light btn-small" id="add_hazard{{sheet.id}}" onclick='toggleItem("safety_hazard_div_{{sheet.id}}"); $(this).hide()'>+ Add Safety Hazard</a>
                <div class="row" style="padding-top: 10px;">
                    <div class="col s12 m12 l10 xl10" id="safety_hazard_div_{{sheet.id}}" style="display: none;">
                    <form  action="{% url 'add-safety-hazard' %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}            
                        <input id="sheet_id" name="sheet_id" value={{sheet.id}} hidden>
                        <div class="row" style="margin: 0;">
                            <div class="col s12">
                                <div class="input-field" style="margin:auto; padding-bottom: 25px;">
                                <label class="active" for="hazard">Hazard<span style="color: #ff7f7f; font-size: 12px;" >(required)</span></label>
                                    <textarea  name="hazard" required class="materialize-textarea active" placeholder="i.e. Testing Transformer Differential" ></textarea>              
                                </div>
                            </div>
                            <div class="col s6">
                                <div class="input-field" style="margin:auto; padding-bottom: 25px;">
                                    <label class="active" for="danger_level">Danger Level<span style="color: #ff7f7f; font-size: 12px;" >(required)</span></label>
                                        <input type="number" name="danger_level" value="" required>
                                </div>
                            </div>
                            <div class="col s6">
                                <div class="input-field" style="margin:auto; padding-bottom: 25px;">
                                    <label class="active" for="probability">Probability<span style="color: #ff7f7f; font-size: 12px;" >(required)</span></label>
                                        <input type="number" name="probability" value="" required>
                                </div>
                            </div>
                            <div class="input-field col s12">
                                <select multiple name="scope_items" style="display: none;">
                                    <option disabled selected>Select Multiple Scope Item</option>
                                    {% for scope_item in job.job_scope_item.all %}
                                        <option value="{{scope_item.id}}">{{scope_item.description}}</option>
                                    {% endfor %}
                                    </select>
                              </div>
                        </div>
                        <div style="padding-top: 10px;"> 
                        <button class="btn-small left phone-button" onclick='toggleCancel("safety_hazard_div_{{sheet.id}}", "add_hazard{{sheet.id}}");'>Cancel</button>
                        <button class="btn-small right phone-button" type="submit"><i class="material-icons left phone-font-lrg ">add</i> Add</button>
                        </div>
                    </form>    
                    </div>
                </div>
              </td>
            </tr>
          {%endfor%}
    </table>
    <script>
         $(document).ready(function(){
            $('select').formSelect();
        });
    </script>
    
</body>
</html>